<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-02-04T11:22:03.878304761"><title>Interceptors | Fantasy-Chess Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"text-websocket-handler-extension","level":0,"title":"Text WebSocket Handler Extension","anchor":"#text-websocket-handler-extension"},{"id":"client-identification-interceptor","level":0,"title":"Client Identification Interceptor","anchor":"#client-identification-interceptor"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Interceptors | Fantasy-Chess Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Fantasy-Chess Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/interceptors.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Interceptors | Fantasy-Chess Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/interceptors.html#webpage",
    "url": "writerside-documentation/interceptors.html",
    "name": "Interceptors | Fantasy-Chess Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Fantasy-Chess Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Interceptors" data-main-title="Interceptors" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Technical Reference///Server"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Fantasy-Chess Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Interceptors" id="Interceptors.md">Interceptors</h1><section class="chapter"><h2 id="text-websocket-handler-extension" data-toc="text-websocket-handler-extension">Text WebSocket Handler Extension</h2><p id="uayacv_5">The <code class="code" id="uayacv_6">TextWebSocketHandlerExt</code> extends the base functionality of the <a href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/socket/handler/TextWebSocketHandler.html" id="uayacv_7" data-external="true" rel="noopener noreferrer"><code class="code" id="uayacv_10">TextWebSocketHandler</code></a> by adding the Token invalidation and checking which player the websocket connection belongs to, it requests the UUID associated with the token from the <a href="services.html#token-service" id="uayacv_8" data-tooltip="The token service is used to generate a token for a given user and check its validity.">Token Service</a> and calls <a href="services.html" id="uayacv_9" data-tooltip="All services are SpringBoot services classes, which are Singletons within the Server context and can automatically be referenced in fields using dependency Injection. They are the backbone of the server and form the link between incoming requests and the database.">Services</a> on the WebSocket Service. It also forwards any TextMessages to the WebSocketService, as well as unregistering clients once they disconnect.</p></section><section class="chapter"><h2 id="client-identification-interceptor" data-toc="client-identification-interceptor">Client Identification Interceptor</h2><p id="uayacv_11">When a client tries to connect to the <code class="code" id="uayacv_12">WebSocketServer</code>, it is not known initially known who he is and the IP address, is not a reliable way to identify clients. This interceptor stands between a new connection and the <code class="code" id="uayacv_13">TextWebSocketHandlerExt</code> to ensure, the client that tries to connect has previously authenticated with the server. This Process is done using <a href="authentication.html#token" id="uayacv_14" data-tooltip="The token consists of a 14 character Base64URL string with a CRC8 checksum attached to form a 16 character token.">Tokens</a>, which the interceptor relays to the <a href="services.html#token-service" id="uayacv_15" data-tooltip="The token service is used to generate a token for a given user and check its validity.">Token Service</a> for validation. Should the token be valid, the interceptor lets the client connect, otherwise it will stop the process and disconnect the client.</p></section><div class="last-modified">Last modified: 04 February 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="authentication.html" class="navigation-links__prev">Authentication</a><a href="repositories.html" class="navigation-links__next">Repositories</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>