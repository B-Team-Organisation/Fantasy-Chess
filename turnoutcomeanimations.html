<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-02-05T22:35:14.755320463"><title>Turn Outcome Animation | Fantasy-Chess Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"abstract-animation","level":0,"title":"Abstract Animation","anchor":"#abstract-animation"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Turn Outcome Animation | Fantasy-Chess Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Fantasy-Chess Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/turnoutcomeanimations.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Turn Outcome Animation | Fantasy-Chess Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/turnoutcomeanimations.html#webpage",
    "url": "writerside-documentation/turnoutcomeanimations.html",
    "name": "Turn Outcome Animation | Fantasy-Chess Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Fantasy-Chess Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="TurnOutcomeAnimations" data-main-title="Turn Outcome Animation" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Technical Reference///Client///Graphics.md|Graphics"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Fantasy-Chess Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="TurnOutcomeAnimations" id="TurnOutcomeAnimations.md">Turn Outcome Animation</h1><p id="-qfqlpz_3"><code class="code" id="-qfqlpz_9">Author: Lukas Walker</code></p><p id="-qfqlpz_4">The turn outcome is animated using the <code class="code" id="-qfqlpz_10">TurnResultAnimationHandler</code>. As soon as the client receives the <a href="turn-logic.html" id="-qfqlpz_11" data-tooltip="Author: Jacinto SchwarzwÃ¤lder">Turn Result</a>, a new instance of the <code class="code" id="-qfqlpz_12">TurnResultAnimationHandler</code> is created to animate the results for the player.</p><p id="-qfqlpz_5">All results that are displayed using animations are converted to their related animation objects.</p><p id="-qfqlpz_6">When the animation is started, the queue is processed to show collisions, movements and attacks until all animations have been played. This information can be retrieved to again let the player plan commands and the game to continue.</p><p id="-qfqlpz_7">For implementation details, please check out the <a href="https://b-team-organisation.github.io/Fantasy-Chess/java-docs/client/core/com/bteam/fantasychess_client/graphics/package-summary.html" id="-qfqlpz_13" data-external="true" rel="noopener noreferrer">JavaDoc</a></p><section class="chapter"><h2 id="abstract-animation" data-toc="abstract-animation">Abstract Animation</h2><p id="-qfqlpz_14">All animation classes inherit from the abstract class <a href="https://b-team-organisation.github.io/Fantasy-Chess/java-docs/client/core/com/bteam/fantasychess_client/graphics/AbstractAnimation.html" id="-qfqlpz_23" data-external="true" rel="noopener noreferrer">AbstractAnimation</a>. This class holds a <code class="code" id="-qfqlpz_24">TiledMapTileLayer</code> for all animations that require map effects (like attacks) and outlines two abstract methods:</p><ul class="list _bullet" id="-qfqlpz_15"><li class="list__item" id="-qfqlpz_25"><p><code class="code" id="-qfqlpz_27">isAnimationOver</code> for checking the status of the specific animation</p></li><li class="list__item" id="-qfqlpz_26"><p><code class="code" id="-qfqlpz_28">startAnimation</code> for starting the animation</p></li></ul><p id="-qfqlpz_16">The <code class="code" id="-qfqlpz_29">TiledMapTileLayer</code> is given the object when its animation is initialized in order for it to always be a fresh and displayed version of the layer.</p><p id="-qfqlpz_17">So far, there are three classes inheriting this class:</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="410px" preserveAspectRatio="none" style="width:747px;height:410px;background:#FFFFFF;" version="1.1" viewBox="0 0 747 410" width="747px" zoomAndPan="magnify"><defs/><g><!--class TurnResultAnimationHandler--><g id="elem_TurnResultAnimationHandler"><rect codeLine="3" fill="#F1F1F1" height="96.8906" id="TurnResultAnimationHandler" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="257" x="245" y="7"/><ellipse cx="268.1" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M271.0688,28.6406 Q270.4906,28.9375 269.85,29.0781 Q269.2094,29.2344 268.5063,29.2344 Q266.0063,29.2344 264.6781,27.5938 Q263.3656,25.9375 263.3656,22.8125 Q263.3656,19.6875 264.6781,18.0313 Q266.0063,16.375 268.5063,16.375 Q269.2094,16.375 269.85,16.5313 Q270.5063,16.6875 271.0688,16.9844 L271.0688,19.7031 Q270.4438,19.125 269.85,18.8594 Q269.2563,18.5781 268.6313,18.5781 Q267.2875,18.5781 266.6,19.6563 Q265.9125,20.7188 265.9125,22.8125 Q265.9125,24.9063 266.6,25.9844 Q267.2875,27.0469 268.6313,27.0469 Q269.2563,27.0469 269.85,26.7813 Q270.4438,26.5 271.0688,25.9219 L271.0688,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="207" x="283.9" y="27.8467">TurnResultAnimationHandler</text><line style="stroke:#181818;stroke-width:0.5;" x1="246" x2="501" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="246" x2="501" y1="47" y2="47"/><ellipse cx="256" cy="60.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="231" x="265" y="63.9951">isDoneWithAnimation(): boolean</text><ellipse cx="256" cy="76.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184" x="265" y="80.292">progressAnimation(): void</text><ellipse cx="256" cy="93.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="265" y="96.5889">startAnimation(): void</text></g><!--class AbstractAnimation--><g id="elem_AbstractAnimation"><rect codeLine="9" fill="#F1F1F1" height="80.5938" id="AbstractAnimation" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="263" y="181"/><ellipse cx="303.65" cy="197" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M306.6188,202.6406 Q306.0406,202.9375 305.4,203.0781 Q304.7594,203.2344 304.0563,203.2344 Q301.5563,203.2344 300.2281,201.5938 Q298.9156,199.9375 298.9156,196.8125 Q298.9156,193.6875 300.2281,192.0313 Q301.5563,190.375 304.0563,190.375 Q304.7594,190.375 305.4,190.5313 Q306.0563,190.6875 306.6188,190.9844 L306.6188,193.7031 Q305.9938,193.125 305.4,192.8594 Q304.8063,192.5781 304.1813,192.5781 Q302.8375,192.5781 302.15,193.6563 Q301.4625,194.7188 301.4625,196.8125 Q301.4625,198.9063 302.15,199.9844 Q302.8375,201.0469 304.1813,201.0469 Q304.8063,201.0469 305.4,200.7813 Q305.9938,200.5 306.6188,199.9219 L306.6188,202.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="323.35" y="201.8467">AbstractAnimation</text><line style="stroke:#181818;stroke-width:0.5;" x1="264" x2="483" y1="213" y2="213"/><line style="stroke:#181818;stroke-width:0.5;" x1="264" x2="483" y1="221" y2="221"/><ellipse cx="274" cy="234.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="283" y="237.9951">isAnimationOver(): boolean</text><ellipse cx="274" cy="250.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="283" y="254.292">startAnimation(): void</text></g><!--class AttackAnimation--><g id="elem_AttackAnimation"><rect codeLine="14" fill="#F1F1F1" height="80.5938" id="AttackAnimation" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="7" y="323"/><ellipse cx="54.25" cy="339" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M57.2188,344.6406 Q56.6406,344.9375 56,345.0781 Q55.3594,345.2344 54.6563,345.2344 Q52.1563,345.2344 50.8281,343.5938 Q49.5156,341.9375 49.5156,338.8125 Q49.5156,335.6875 50.8281,334.0313 Q52.1563,332.375 54.6563,332.375 Q55.3594,332.375 56,332.5313 Q56.6563,332.6875 57.2188,332.9844 L57.2188,335.7031 Q56.5938,335.125 56,334.8594 Q55.4063,334.5781 54.7813,334.5781 Q53.4375,334.5781 52.75,335.6563 Q52.0625,336.7188 52.0625,338.8125 Q52.0625,340.9063 52.75,341.9844 Q53.4375,343.0469 54.7813,343.0469 Q55.4063,343.0469 56,342.7813 Q56.5938,342.5 57.2188,341.9219 L57.2188,344.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="118" x="74.75" y="343.8467">AttackAnimation</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="227" y1="355" y2="355"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="227" y1="363" y2="363"/><ellipse cx="18" cy="376.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="27" y="379.9951">isAnimationOver(): boolean</text><ellipse cx="18" cy="392.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="27" y="396.292">startAnimation(): void</text></g><!--class CollisionAnimation--><g id="elem_CollisionAnimation"><rect codeLine="19" fill="#F1F1F1" height="80.5938" id="CollisionAnimation" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="263" y="323"/><ellipse cx="303.2" cy="339" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M306.1688,344.6406 Q305.5906,344.9375 304.95,345.0781 Q304.3094,345.2344 303.6063,345.2344 Q301.1063,345.2344 299.7781,343.5938 Q298.4656,341.9375 298.4656,338.8125 Q298.4656,335.6875 299.7781,334.0313 Q301.1063,332.375 303.6063,332.375 Q304.3094,332.375 304.95,332.5313 Q305.6063,332.6875 306.1688,332.9844 L306.1688,335.7031 Q305.5438,335.125 304.95,334.8594 Q304.3563,334.5781 303.7313,334.5781 Q302.3875,334.5781 301.7,335.6563 Q301.0125,336.7188 301.0125,338.8125 Q301.0125,340.9063 301.7,341.9844 Q302.3875,343.0469 303.7313,343.0469 Q304.3563,343.0469 304.95,342.7813 Q305.5438,342.5 306.1688,341.9219 L306.1688,344.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="322.8" y="343.8467">CollisionAnimation</text><line style="stroke:#181818;stroke-width:0.5;" x1="264" x2="483" y1="355" y2="355"/><line style="stroke:#181818;stroke-width:0.5;" x1="264" x2="483" y1="363" y2="363"/><ellipse cx="274" cy="376.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="283" y="379.9951">isAnimationOver(): boolean</text><ellipse cx="274" cy="392.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="283" y="396.292">startAnimation(): void</text></g><!--class MovementAnimation--><g id="elem_MovementAnimation"><rect codeLine="24" fill="#F1F1F1" height="80.5938" id="MovementAnimation" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="519" y="323"/><ellipse cx="552.45" cy="339" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M555.4188,344.6406 Q554.8406,344.9375 554.2,345.0781 Q553.5594,345.2344 552.8563,345.2344 Q550.3563,345.2344 549.0281,343.5938 Q547.7156,341.9375 547.7156,338.8125 Q547.7156,335.6875 549.0281,334.0313 Q550.3563,332.375 552.8563,332.375 Q553.5594,332.375 554.2,332.5313 Q554.8563,332.6875 555.4188,332.9844 L555.4188,335.7031 Q554.7938,335.125 554.2,334.8594 Q553.6063,334.5781 552.9813,334.5781 Q551.6375,334.5781 550.95,335.6563 Q550.2625,336.7188 550.2625,338.8125 Q550.2625,340.9063 550.95,341.9844 Q551.6375,343.0469 552.9813,343.0469 Q553.6063,343.0469 554.2,342.7813 Q554.7938,342.5 555.4188,341.9219 L555.4188,344.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="570.55" y="343.8467">MovementAnimation</text><line style="stroke:#181818;stroke-width:0.5;" x1="520" x2="739" y1="355" y2="355"/><line style="stroke:#181818;stroke-width:0.5;" x1="520" x2="739" y1="363" y2="363"/><ellipse cx="530" cy="376.6484" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="195" x="539" y="379.9951">isAnimationOver(): boolean</text><ellipse cx="530" cy="392.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="539" y="396.292">startAnimation(): void</text></g><!--link TurnResultAnimationHandler to AbstractAnimation--><g id="link_TurnResultAnimationHandler_AbstractAnimation"><path codeLine="29" d="M373.5,104.38 C373.5,128.67 373.5,151.84 373.5,174.86 " fill="none" id="TurnResultAnimationHandler-to-AbstractAnimation" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="373.5,180.86,377.5,171.86,373.5,175.86,369.5,171.86,373.5,180.86" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="378.5,147.5664,381.4389,138.5213,375.5611,138.5213,378.5,147.5664" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="30" x="387.5" y="147.0669">uses</text></g><!--reverse link AbstractAnimation to AttackAnimation--><g id="link_AbstractAnimation_AttackAnimation"><path codeLine="30" d="M285.3766,270.6953 C250.6266,289.6953 224.88,303.78 190.1,322.8 " fill="none" id="AbstractAnimation-backto-AttackAnimation" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="301.17,262.06,282.4982,265.4308,288.255,275.9597,301.17,262.06" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link AbstractAnimation to CollisionAnimation--><g id="link_AbstractAnimation_CollisionAnimation"><path codeLine="31" d="M373.5,280.24 C373.5,299.16 373.5,303.73 373.5,322.66 " fill="none" id="AbstractAnimation-backto-CollisionAnimation" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="373.5,262.24,367.5,280.24,379.5,280.24,373.5,262.24" style="stroke:#181818;stroke-width:1.0;"/></g><!--reverse link AbstractAnimation to MovementAnimation--><g id="link_AbstractAnimation_MovementAnimation"><path codeLine="32" d="M461.6234,270.6953 C496.3734,289.6953 522.12,303.78 556.9,322.8 " fill="none" id="AbstractAnimation-backto-MovementAnimation" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="445.83,262.06,458.745,275.9597,464.5018,265.4308,445.83,262.06" style="stroke:#181818;stroke-width:1.0;"/></g><!--SRC=[jP7F2i8m3CRlVOeU5UaB31aCFNWHGGJFNHUqs3MZoNPHtzqXO_wfqulBCT-FByaNupIHtDN1Ru5gnvctfMQBVgLzuI38iv1jpQIb9NhOMpxso6IQo1pHWVOTL0Ky121wGHgqHQSJwy2nU1N2tFV8SkAWpGDv6j_tDWs4UFHFQsPjJYCOBz0vIwqqWlSQ6oZ1_pUFByzMAltmWqJM12HJ4KlpYrBlqGvXSL13P7Isk040]--></g></svg></div><p id="-qfqlpz_19">This diagramm shows their relation in a heavily simplified manner.</p><section class="chapter"><h3 id="movement-animation" data-toc="movement-animation">Movement Animation</h3><p id="-qfqlpz_30">The Movement Animation is responsible for animating movements of characters on the map. It holds a <a href="charactersprite.html" id="-qfqlpz_31" data-tooltip="Author: Lukas Walker">Character Sprite</a> that gets prompted to move to the target location when the animation is started.</p></section><section class="chapter"><h3 id="attack-animation" data-toc="attack-animation">Attack Animation</h3><p id="-qfqlpz_32">The Attack Animation is responsible for animating attacks of characters on the map. It holds a <a href="charactersprite.html" id="-qfqlpz_34" data-tooltip="Author: Lukas Walker">Character Sprite</a> that gets prompted to move to the target location and back to its original position when the animation is started. During this movement, the attacked area on the map is highlighted in red using the <code class="code" id="-qfqlpz_35">TiledMapTileLayer</code>.</p><p id="-qfqlpz_33">Attacks targeting the position the character is standing on directly are treated different, because the normal method would result in a animation too short to process. For this reason, these attacks lead to a series of small movements from left to right.</p></section><section class="chapter"><h3 id="collision-animation" data-toc="collision-animation">Collision Animation</h3><p id="-qfqlpz_36">Collisions work like movements but move two <a href="charactersprite.html" id="-qfqlpz_38" data-tooltip="Author: Lukas Walker">Character Sprite</a> to the target location instead of one.</p><p id="-qfqlpz_37">All animations are over when the sprites stopped moving.</p></section></section><div class="last-modified">Last modified: 05 February 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="charactersprite.html" class="navigation-links__prev">Character Sprite</a><a href="networking.html" class="navigation-links__next">Networking</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>