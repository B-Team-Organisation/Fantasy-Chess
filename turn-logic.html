<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-02-03T14:45:17.265134076"><title>Turn Logic | Fantasy-Chess Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"1-command-validation","level":0,"title":"1. Command Validation","anchor":"#1-command-validation"},{"id":"2-command-application","level":0,"title":"2. Command Application","anchor":"#2-command-application"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Turn Logic | Fantasy-Chess Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Fantasy-Chess Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/turn-logic.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Turn Logic | Fantasy-Chess Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/turn-logic.html#webpage",
    "url": "writerside-documentation/turn-logic.html",
    "name": "Turn Logic | Fantasy-Chess Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Fantasy-Chess Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Turn-Logic" data-main-title="Turn Logic" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Technical Reference///Common"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Fantasy-Chess Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Turn-Logic" id="Turn-Logic.md">Turn Logic</h1><p id="-wygtv0_3">The Turn Logic handles the application of all turn-related rules <span class="emphasis" id="-wygtv0_15">after the commands have been sent by the players</span>. Thus, its scope is all movement and attack commands as well as the potential result of the game.</p><p id="-wygtv0_4">For the application of a turn, the TurnLogic component is structured into two steps:</p><ol class="list _decimal" id="-wygtv0_5" type="1"><li class="list__item" id="-wygtv0_16"><p>Check if commands follow all rules</p></li><li class="list__item" id="-wygtv0_17"><p>Apply the commands that are valid</p></li></ol><p id="-wygtv0_6">Both these requirements are met with utility classes exposing not only a general method to do these steps, but all important helper methods that the methods are broken down into. This way, the server can perform all checks at once, whilst additional features can use individual rules and procedures.</p><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="756px" preserveAspectRatio="none" style="width:759px;height:756px;background:#FFFFFF;" version="1.1" viewBox="0 0 759 756" width="759px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="147" x="299" y="22.9951">Turn Logic Classes</text><!--class TurnLogic--><g id="elem_TurnLogic"><rect codeLine="5" fill="#F1F1F1" height="129.4844" id="TurnLogic" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="279" x="136.5" y="44.2969"/><ellipse cx="236.25" cy="60.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M239.2188,65.9375 Q238.6406,66.2344 238,66.375 Q237.3594,66.5313 236.6563,66.5313 Q234.1563,66.5313 232.8281,64.8906 Q231.5156,63.2344 231.5156,60.1094 Q231.5156,56.9844 232.8281,55.3281 Q234.1563,53.6719 236.6563,53.6719 Q237.3594,53.6719 238,53.8281 Q238.6563,53.9844 239.2188,54.2813 L239.2188,57 Q238.5938,56.4219 238,56.1563 Q237.4063,55.875 236.7813,55.875 Q235.4375,55.875 234.75,56.9531 Q234.0625,58.0156 234.0625,60.1094 Q234.0625,62.2031 234.75,63.2813 Q235.4375,64.3438 236.7813,64.3438 Q237.4063,64.3438 238,64.0781 Q238.5938,63.7969 239.2188,63.2188 L239.2188,65.9375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="256.75" y="65.1436">TurnLogic</text><line style="stroke:#181818;stroke-width:0.5;" x1="137.5" x2="414.5" y1="76.2969" y2="76.2969"/><line style="stroke:#181818;stroke-width:0.5;" x1="137.5" x2="414.5" y1="84.2969" y2="84.2969"/><ellipse cx="147.5" cy="97.9453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253" x="156.5" y="101.292">static TurnResult applyCommands()</text><ellipse cx="147.5" cy="114.2422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167" x="156.5" y="117.5889">static checkForDeaths()</text><ellipse cx="147.5" cy="130.5391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166" x="156.5" y="133.8857">static applyMovement()</text><ellipse cx="147.5" cy="146.8359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="156.5" y="150.1826">static applyAttacks()</text><ellipse cx="147.5" cy="163.1328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="214" x="156.5" y="166.4795">static String checkForWinner()</text></g><!--class TurnResult--><g id="elem_TurnResult"><rect codeLine="13" fill="#F1F1F1" height="243.5625" id="TurnResult" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="350" x="7" y="250.2969"/><ellipse cx="139.25" cy="266.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M142.2188,271.9375 Q141.6406,272.2344 141,272.375 Q140.3594,272.5313 139.6563,272.5313 Q137.1563,272.5313 135.8281,270.8906 Q134.5156,269.2344 134.5156,266.1094 Q134.5156,262.9844 135.8281,261.3281 Q137.1563,259.6719 139.6563,259.6719 Q140.3594,259.6719 141,259.8281 Q141.6563,259.9844 142.2188,260.2813 L142.2188,263 Q141.5938,262.4219 141,262.1563 Q140.4063,261.875 139.7813,261.875 Q138.4375,261.875 137.75,262.9531 Q137.0625,264.0156 137.0625,266.1094 Q137.0625,268.2031 137.75,269.2813 Q138.4375,270.3438 139.7813,270.3438 Q140.4063,270.3438 141,270.0781 Q141.5938,269.7969 142.2188,269.2188 L142.2188,271.9375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="159.75" y="271.1436">TurnResult</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="356" y1="282.2969" y2="282.2969"/><ellipse cx="18" cy="295.9453" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="300" x="27" y="299.292">List&lt;CharacterEntity&gt; updatedCharacters</text><ellipse cx="18" cy="328.5391" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="27" y="315.5889">movementConflicts : List&lt;PairNoOrder&lt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="312" x="39" y="331.8857">MovementDataModel, MovementDataModel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="35" y="348.1826">&gt;&gt;</text><ellipse cx="18" cy="361.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="283" x="27" y="364.4795">List&lt;MovementDataModel&gt; validMoves</text><ellipse cx="18" cy="377.4297" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="260" x="27" y="380.7764">List&lt;AttackDataModel&gt; validAttacks</text><ellipse cx="18" cy="393.7266" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="27" y="397.0732">String winner</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="356" y1="404.375" y2="404.375"/><ellipse cx="18" cy="418.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="171" x="27" y="421.3701">getUpdatedCharacters()</text><ellipse cx="18" cy="434.3203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="27" y="437.667">getMovementConflicts()</text><ellipse cx="18" cy="450.6172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="27" y="453.9639">getValidMoves()</text><ellipse cx="18" cy="466.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="27" y="470.2607">getValidAttacks()</text><ellipse cx="18" cy="483.2109" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="27" y="486.5576">getWinner()</text></g><!--class CommandValidator--><g id="elem_CommandValidator"><rect codeLine="27" fill="#F1F1F1" height="227.2656" id="CommandValidator" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="359" x="392.5" y="258.7969"/><ellipse cx="498.25" cy="274.7969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M501.2188,280.4375 Q500.6406,280.7344 500,280.875 Q499.3594,281.0313 498.6563,281.0313 Q496.1563,281.0313 494.8281,279.3906 Q493.5156,277.7344 493.5156,274.6094 Q493.5156,271.4844 494.8281,269.8281 Q496.1563,268.1719 498.6563,268.1719 Q499.3594,268.1719 500,268.3281 Q500.6563,268.4844 501.2188,268.7813 L501.2188,271.5 Q500.5938,270.9219 500,270.6563 Q499.4063,270.375 498.7813,270.375 Q497.4375,270.375 496.75,271.4531 Q496.0625,272.5156 496.0625,274.6094 Q496.0625,276.7031 496.75,277.7813 Q497.4375,278.8438 498.7813,278.8438 Q499.4063,278.8438 500,278.5781 Q500.5938,278.2969 501.2188,277.7188 L501.2188,280.4375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="518.75" y="279.6436">CommandValidator</text><line style="stroke:#181818;stroke-width:0.5;" x1="393.5" x2="750.5" y1="290.7969" y2="290.7969"/><line style="stroke:#181818;stroke-width:0.5;" x1="393.5" x2="750.5" y1="298.7969" y2="298.7969"/><ellipse cx="403.5" cy="312.4453" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="310" x="412.5" y="315.792">static ValidationResult validateCommands()</text><ellipse cx="403.5" cy="328.7422" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="412.5" y="332.0889">static validateMovements()</text><ellipse cx="403.5" cy="345.0391" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="412.5" y="348.3857">static validateAttacks()</text><ellipse cx="403.5" cy="361.3359" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="266" x="412.5" y="364.6826">static validateSingleCommandsOnly()</text><ellipse cx="403.5" cy="377.6328" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="333" x="412.5" y="380.9795">static opposingPlayersMovingToSamePosition()</text><ellipse cx="403.5" cy="393.9297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="273" x="412.5" y="397.2764">static movingInsideMovementPattern()</text><ellipse cx="403.5" cy="410.2266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="200" x="412.5" y="413.5732">static movingInsideBounds()</text><ellipse cx="403.5" cy="426.5234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="274" x="412.5" y="429.8701">static validateMovingToSamePosition()</text><ellipse cx="403.5" cy="442.8203" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="300" x="412.5" y="446.167">static validateMovingToOccupiedPosition()</text><ellipse cx="403.5" cy="459.1172" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191" x="412.5" y="462.4639">static attackInsideBounds()</text><ellipse cx="403.5" cy="475.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="256" x="412.5" y="478.7607">static attackingInsideAttackPattern()</text></g><!--class ValidationResult--><g id="elem_ValidationResult"><rect codeLine="41" fill="#F1F1F1" height="178.375" id="ValidationResult" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="350" x="397" y="571.2969"/><ellipse cx="509.75" cy="587.2969" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M512.7188,592.9375 Q512.1406,593.2344 511.5,593.375 Q510.8594,593.5313 510.1563,593.5313 Q507.6563,593.5313 506.3281,591.8906 Q505.0156,590.2344 505.0156,587.1094 Q505.0156,583.9844 506.3281,582.3281 Q507.6563,580.6719 510.1563,580.6719 Q510.8594,580.6719 511.5,580.8281 Q512.1563,580.9844 512.7188,581.2813 L512.7188,584 Q512.0938,583.4219 511.5,583.1563 Q510.9063,582.875 510.2813,582.875 Q508.9375,582.875 508.25,583.9531 Q507.5625,585.0156 507.5625,587.1094 Q507.5625,589.2031 508.25,590.2813 Q508.9375,591.3438 510.2813,591.3438 Q510.9063,591.3438 511.5,591.0781 Q512.0938,590.7969 512.7188,590.2188 L512.7188,592.9375 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="530.25" y="592.1436">ValidationResult</text><line style="stroke:#181818;stroke-width:0.5;" x1="398" x2="746" y1="603.2969" y2="603.2969"/><ellipse cx="408" cy="633.2422" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="286" x="417" y="620.292">movementConflicts : List&lt;PairNoOrder&lt;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="312" x="429" y="636.5889">MovementDataModel, MovementDataModel</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="24" x="425" y="652.8857">&gt;&gt;</text><ellipse cx="408" cy="665.8359" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="283" x="417" y="669.1826">List&lt;MovementDataModel&gt; validMoves</text><ellipse cx="408" cy="682.1328" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="260" x="417" y="685.4795">List&lt;AttackDataModel&gt; validAttacks</text><line style="stroke:#181818;stroke-width:0.5;" x1="398" x2="746" y1="692.7813" y2="692.7813"/><ellipse cx="408" cy="706.4297" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="169" x="417" y="709.7764">getMovementConflicts()</text><ellipse cx="408" cy="722.7266" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="417" y="726.0732">getValidMoves()</text><ellipse cx="408" cy="739.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="417" y="742.3701">getValidAttacks()</text></g><!--link TurnLogic to CommandValidator--><g id="link_TurnLogic_CommandValidator"><path codeLine="51" d="M360.9,173.5469 C373.18,183.2969 385.54,193.4169 397,203.2969 C417.1,220.6169 433.529,235.4866 453.479,254.2466 " fill="none" id="TurnLogic-to-CommandValidator" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="457.85,258.3569,454.0337,249.2775,454.2075,254.9316,448.5533,255.1055,457.85,258.3569" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="412" y="216.3638">Validates Commands</text></g><!--link TurnLogic to TurnResult--><g id="link_TurnLogic_TurnResult"><path codeLine="52" d="M253.13,173.4369 C244.78,196.6369 237.0796,218.0706 227.5396,244.6106 " fill="none" id="TurnLogic-to-TurnResult" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="225.51,250.2569,232.3186,243.1405,227.2013,245.5516,224.7902,240.4344,225.51,250.2569" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="242" y="216.3638">Returns Turn Outcome</text></g><!--link CommandValidator to ValidationResult--><g id="link_CommandValidator_ValidationResult"><path codeLine="53" d="M572,485.9169 C572,514.2169 572,538.1669 572,565.0769 " fill="none" id="CommandValidator-to-ValidationResult" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="572,571.0769,576,562.0769,572,566.0769,568,562.0769,572,571.0769" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="573" y="537.3638">Provides Validation Results</text></g><!--SRC=[rLHDRzim3BtdLn2vTCFMFr0K0RPq1GOqYv5qssKNrc9j8R9aI7I28DX_7_rPrrgoooxroU9x59yUAR5cG_1OUGiFBjCfB0s6G64sI-kV1cc1qmpa-m21aMLP0niAbM70iZJ7fIiAj2gyU_-Qb-QKxkwTloFaF4ARr9NRKq6M_mf-OiPq5oLksMkR3Rl_rDQI5zBliV1ENw_yGGU-NUReCMNoNonhFYwWAXKogI4U6lOL59sgfRFFHgSS03t1atSxig3SmK9mm3c1qfXvBE1P2yVP9bPYHbtLU9-RLac2sdzpQw_8t_womkrzk4F6bLDaFiQXchXOZ0yKKHQmHwDL7GzZOklabDRvsn4xMm-DdLqi8_u-zMXeXu2hwG77u8z1IXITTbRYSHkxiMeIa9s74xmUX0xHhk_slWtGkO7iyLxsMSAPoUlXhHXbXYfhQuvJfYjB5uIL63oAPr9G5ezkYmKb0jIQfob5m_bgWrQ3m0HPBBz8_UogooVzP-4fTvscLQb9dUDZOywbwYrZaDYw-NAMeSDH0qzlyUBybtiWdbp1XapZHiXr6U29-43ouAIkA9sjntNsyYHVNo-Y2t83y-wVXjiJvfEaqUCe_0snhDid4zOLIosQpwARLoT6pPBqnClCA1ft4bfKwlu1]--></g></svg></div><p id="-wygtv0_8">The general procedure is as follows: <br> The client sends all commands to the server. The server takes those commands and adds its own version of the <a href="characterentity.html" id="-wygtv0_19" data-tooltip="Character Entities">CharacterEntities</a>. These will be given to the <code class="code" id="-wygtv0_20">TurnLogic</code>, which will firstly validate them using the <code class="code" id="-wygtv0_21">CommandValidator</code>, and then apply all valid commands and return the modified characters and other processing information described below back to the server.</p><p id="-wygtv0_9">This method of the <code class="code" id="-wygtv0_22">TurnLogic</code> will do all the aforementioned:</p><div class="code-block" data-lang="java">
    public static TurnResult applyCommands(
            List&lt;MovementDataModel&gt; moves,
            List&lt;CharacterEntity&gt; characters,
            List&lt;AttackDataModel&gt; attacks,
            GridService gridService,
            String hostID) {
            ...
    }
</div><aside class="prompt" data-type="tip" data-title="" id="-wygtv0_11"><p id="-wygtv0_23">Commands are validated with characters stored in the server to filter any client mistakes and to avert any cheating.</p></aside><svg aria-roledescription="sequence" role="graphics-document document" viewBox="-50 -10 1379.5 575" style="max-width: 1379.5px;" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid"><g><rect class="actor actor-bottom" ry="3" rx="3" name="TurnResult" height="65" width="150" stroke="#666" fill="#eaeaea" y="489" x="1129.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="521.5" x="1204.5"><tspan dy="0" x="1204.5">TurnResult</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="ValidationResult" height="65" width="150" stroke="#666" fill="#eaeaea" y="489" x="929.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="521.5" x="1004.5"><tspan dy="0" x="1004.5">ValidationResult</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="CommandValidator" height="65" width="167" stroke="#666" fill="#eaeaea" y="489" x="712.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="521.5" x="796"><tspan dy="0" x="796">CommandValidator</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="TurnLogic" height="65" width="150" stroke="#666" fill="#eaeaea" y="489" x="474"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="521.5" x="549"><tspan dy="0" x="549">TurnLogic</tspan></text></g><g><rect class="actor actor-bottom" ry="3" rx="3" name="Server" height="65" width="150" stroke="#666" fill="#eaeaea" y="489" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="521.5" x="75"><tspan dy="0" x="75">Server</tspan></text></g><g><line name="TurnResult" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="489" x2="1204.5" y1="5" x1="1204.5" id="actor6"></line><g id="root-6"><rect class="actor actor-top" ry="3" rx="3" name="TurnResult" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="1129.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1204.5"><tspan dy="0" x="1204.5">TurnResult</tspan></text></g></g><g><line name="ValidationResult" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="489" x2="1004.5" y1="5" x1="1004.5" id="actor5"></line><g id="root-5"><rect class="actor actor-top" ry="3" rx="3" name="ValidationResult" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="929.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1004.5"><tspan dy="0" x="1004.5">ValidationResult</tspan></text></g></g><g><line name="CommandValidator" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="489" x2="796" y1="5" x1="796" id="actor4"></line><g id="root-4"><rect class="actor actor-top" ry="3" rx="3" name="CommandValidator" height="65" width="167" stroke="#666" fill="#eaeaea" y="0" x="712.5"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="796"><tspan dy="0" x="796">CommandValidator</tspan></text></g></g><g><line name="TurnLogic" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="489" x2="549" y1="5" x1="549" id="actor3"></line><g id="root-3"><rect class="actor actor-top" ry="3" rx="3" name="TurnLogic" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="474"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="549"><tspan dy="0" x="549">TurnLogic</tspan></text></g></g><g><line name="Server" stroke="#999" stroke-width="0.5px" class="actor-line 200" y2="489" x2="75" y1="5" x1="75" id="actor2"></line><g id="root-2"><rect class="actor actor-top" ry="3" rx="3" name="Server" height="65" width="150" stroke="#666" fill="#eaeaea" y="0" x="0"></rect><text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">Server</tspan></text></g></g><g></g><defs><symbol height="24" width="24" id="computer"><path d="M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z" transform="scale(.5)"></path></symbol></defs><defs><symbol clip-rule="evenodd" fill-rule="evenodd" id="database"><path d="M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z" transform="scale(.5)"></path></symbol></defs><defs><symbol height="24" width="24" id="clock"><path d="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z" transform="scale(.5)"></path></symbol></defs><defs><marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead"><path d="M -1 0 L 10 5 L 0 10 z"></path></marker></defs><defs><marker refY="4.5" refX="4" orient="auto" markerHeight="8" markerWidth="15" id="crosshead"><path style="stroke-dasharray: 0, 0;" d="M 1,2 L 6,7 M 6,2 L 1,7" stroke-width="1pt" stroke="#000000" fill="none"></path></marker></defs><defs><marker orient="auto" markerHeight="28" markerWidth="20" refY="7" refX="15.5" id="filled-head"><path d="M 18,7 L9,13 L14,7 L9,1 Z"></path></marker></defs><defs><marker orient="auto" markerHeight="40" markerWidth="60" refY="15" refX="15" id="sequencenumber"><circle r="6" cy="15" cx="15"></circle></marker></defs><g><rect class="activation0" height="404" width="10" stroke="#666" fill="#EDF2AE" y="65" x="70"></rect></g><g><rect class="activation0" height="354" width="10" stroke="#666" fill="#EDF2AE" y="115" x="544"></rect></g><g><rect class="activation0" height="152" width="10" stroke="#666" fill="#EDF2AE" y="211" x="791"></rect></g><g><rect class="activation0" height="56" width="10" stroke="#666" fill="#EDF2AE" y="307" x="999.5"></rect></g><g><rect class="activation0" height="56" width="10" stroke="#666" fill="#EDF2AE" y="413" x="1199.5"></rect></g><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="313">&lt;&lt;create&gt;&gt;</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="113" x2="545" y1="113" x1="80"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="128" x="311">Send Commands, Characters, GridService and HostId</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="161" x2="541" y1="161" x1="80"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="176" x="673">&lt;&lt;create&gt;&gt;</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="209" x2="792" y1="209" x1="554"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="224" x="671">Validate Commands</text><line style="fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine0" y2="257" x2="788" y1="257" x1="554"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="272" x="901">&lt;&lt;create&gt;&gt;</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="305" x2="1000.5" y1="305" x1="801"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="320" x="902">​</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="315" x2="804" y1="315" x1="999.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="330" x="674">Return ValidationResult</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="363" x2="557" y1="363" x1="791"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="378" x="877">&lt;&lt;create&gt;&gt;</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="411" x2="1200.5" y1="411" x1="554"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="426" x="878">​</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="421" x2="557" y1="421" x1="1199.5"></line><text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="436" x="314">Return TurnResult</text><line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="none" stroke-width="2" class="messageLine1" y2="469" x2="83" y1="469" x1="544"></line></svg><section class="chapter"><h2 id="1-command-validation" data-toc="1-command-validation">1. Command Validation</h2><p id="-wygtv0_24">The <code class="code" id="-wygtv0_37">CommandValidator</code> class validates that attack and movement commands follow all game rules.</p><section class="procedure-steps"><h3 id="-wygtv0_25" data-toc="-wygtv0_25">Turn-Related Game Rules:</h3><a name="rule1"></a><ol class="list _decimal"><li class="list__item" id="-wygtv0_39"><p>Each Character can only have one command.</p></li><a name="rule2"></a><li class="list__item" id="-wygtv0_41"><p>Characters may not attack or move out of bounds regarding the grid map.</p></li><a name="rule3"></a><li class="list__item" id="-wygtv0_43"><p>Characters may not move or attack different to the movement/attack pattern as defined by their <a href="characterdatamodel.html" id="-wygtv0_48" data-tooltip="Character Data Model">CharacterDataModel</a></p></li><li class="list__item" id="-wygtv0_44"><p>A character may not move to where another character already is (even if they are set to move away during that turn).</p></li><li class="list__item" id="-wygtv0_45"><p>Multiple characters of the same player may not move to the same position.</p></li><a name="rule6"></a><li class="list__item" id="-wygtv0_47"><p>Characters of opposing players may not move to the same position.</p></li></ol></section><aside class="prompt" data-type="note" data-title="" id="-wygtv0_26"><p id="-wygtv0_49">Movement to the same position is separately checked for opposing players, because we treat them individually as <code class="code" id="-wygtv0_50">bounces</code>. This is because it's impossible to know if it will happen in advance, so the players are shown a special animation.</p></aside><p id="-wygtv0_27">To check the rules, the <code class="code" id="-wygtv0_51">CommandValidator</code> will not only need the moves and characters, but also a copy of the <a href="gridservice.html" id="-wygtv0_52" data-tooltip="The Grid Service wraps a and hosts methods providing information about the or to manipulate it. It only holds a single :">Grid Service</a> in use and the PlayerID String of the host. The GridService is needed for <a href="#rule2" id="-wygtv0_53" data-tooltip="Characters may not attack or move out of Bounds regarding the grid map">rule 2</a>. The PlayerID of the host is needed to reverse the <a href="patterns.html" id="-wygtv0_54" data-tooltip="Patterns are used to define the valid target positions and effected areas of both movement and attack commands. They are defined using Pattern Models.">Patterns</a> of his opponent before checking <a href="#rule3" id="-wygtv0_55" data-tooltip="Characters may not move or attack different to the movement/attack pattern as defined by their `CharacterDataModel`">rule 3</a>.</p><aside class="prompt" data-type="note" data-title="" id="-wygtv0_28"><p id="-wygtv0_56">Internally, the opposing player moves in the opposite direction to the host. However, the patterns are only stored with the direction of the host in mind. For the opponent, the <code class="code" id="-wygtv0_57">PatternService</code> has a <code class="code" id="-wygtv0_58">reversePattern</code> method.</p></aside><p id="-wygtv0_29">Running the method <code class="code" id="-wygtv0_59">validateCommands</code> will check all the rules. Movement and attack checks are further consolidated as methods, whereas <a href="#rule1" id="-wygtv0_60" data-tooltip="Each Character can only have one command">rule 1</a> and <a href="#rule6" id="-wygtv0_61" data-tooltip="Opposing players may not move to the same position">rule 6</a> are not. The resulting <code class="code" id="-wygtv0_62">ValidationResult</code> object contains a list of conflicting <a href="movementdatamodel.html" id="-wygtv0_63" data-tooltip="Movement Data Model">MovementDataModel</a>-Pairs ('bounces') and lists of valid moves and valid attacks.</p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 1000.71875 642"  class="flowchart" xmlns="http://www.w3.org/2000/svg" width="1000.71875" id="mermaid"><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateCommands_validateSingleCommandsOnly_0" d="M125.422,320L144.693,281.167C163.964,242.333,202.505,164.667,226.833,125.833C251.161,87,261.276,87,270.724,87C280.172,87,288.953,87,293.344,87L297.734,87"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateCommands_validateMovements_1" d="M134.354,320L152.136,298.5C169.919,277,205.483,234,231.518,212.5C257.553,191,274.06,191,289.9,191C305.74,191,320.913,191,328.499,191L336.086,191"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateCommands_validateAttacks_2" d="M134.354,374L152.136,395.5C169.919,417,205.483,460,232.78,481.5C260.077,503,279.107,503,297.47,503C315.833,503,333.53,503,342.378,503L351.227,503"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateCommands_opposingPlayersMovingToSamePosition_3" d="M125.422,374L144.693,412.833C163.964,451.667,202.505,529.333,223.859,568.167C245.214,607,249.38,607,252.88,607C256.38,607,259.214,607,260.63,607L262.047,607"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateMovements_movingInsideBounds_4" d="M479.796,164L507.845,142.5C535.895,121,591.994,78,626.291,56.5C660.589,35,673.083,35,684.911,35C696.74,35,707.901,35,713.482,35L719.063,35"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateMovements_movingInsideMovementPattern_5" d="M549.055,164.304L565.561,160.087C582.068,155.87,615.081,147.435,634.825,143.217C654.569,139,661.044,139,666.853,139C672.661,139,677.803,139,680.374,139L682.945,139"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateMovements_validateMovingToSamePosition_6" d="M549.055,217.696L565.561,221.913C582.068,226.13,615.081,234.565,634.749,238.783C654.418,243,660.742,243,666.4,243C672.057,243,677.048,243,679.544,243L682.039,243"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateMovements_validateMovingToOccupiedPosition_7" d="M479.796,218L507.845,239.5C535.895,261,591.994,304,622.127,325.5C652.26,347,656.427,347,659.927,347C663.427,347,666.26,347,667.677,347L669.094,347"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateAttacks_attackingInsideBounds_8" d="M533.914,480.173L552.944,475.311C571.974,470.449,610.034,460.724,634.789,455.862C659.544,451,670.995,451,681.779,451C692.563,451,702.68,451,707.738,451L712.797,451"></path><path marker-end="url(#mermaid_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_validateAttacks_attackingInsideAttackPattern_9" d="M533.914,525.827L552.944,530.689C571.974,535.551,610.034,545.276,633.041,550.138C656.048,555,664.003,555,671.29,555C678.578,555,685.199,555,688.51,555L691.82,555"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(112.0234375, 347)" id="flowchart-validateCommands-0" class="node default"><rect height="54" width="208.046875" y="-27" x="-104.0234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-74.0234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="148.046875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>validateCommands()</p></span></div></foreignObject></g></g><g transform="translate(444.5703125, 87)" id="flowchart-validateSingleCommandsOnly-2" class="node default"><rect height="54" width="285.671875" y="-27" x="-142.8359375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-112.8359375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="225.671875"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>validateSingleCommandsOnly()</p></span></div></foreignObject></g></g><g transform="translate(444.5703125, 191)" id="flowchart-validateMovements-4" class="node default"><rect height="54" width="208.96875" y="-27" x="-104.484375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-74.484375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="148.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>validateMovements()</p></span></div></foreignObject></g></g><g transform="translate(444.5703125, 503)" id="flowchart-validateAttacks-6" class="node default"><rect height="54" width="178.6875" y="-27" x="-89.34375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-59.34375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="118.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>validateAttacks()</p></span></div></foreignObject></g></g><g transform="translate(444.5703125, 607)" id="flowchart-opposingPlayersMovingToSamePosition-8" class="node default"><rect height="54" width="357.046875" y="-27" x="-178.5234375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-148.5234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="297.046875"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>opposingPlayersMovingToSamePosition()</p></span></div></foreignObject></g></g><g transform="translate(832.90625, 35)" id="flowchart-movingInsideBounds-10" class="node default"><rect height="54" width="219.6875" y="-27" x="-109.84375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-79.84375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="159.6875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>movingInsideBounds()</p></span></div></foreignObject></g></g><g transform="translate(832.90625, 139)" id="flowchart-movingInsideMovementPattern-12" class="node default"><rect height="54" width="291.921875" y="-27" x="-145.9609375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-115.9609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="231.921875"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>movingInsideMovementPattern()</p></span></div></foreignObject></g></g><g transform="translate(832.90625, 243)" id="flowchart-validateMovingToSamePosition-14" class="node default"><rect height="54" width="293.734375" y="-27" x="-146.8671875" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-116.8671875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="233.734375"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>validateMovingToSamePosition()</p></span></div></foreignObject></g></g><g transform="translate(832.90625, 347)" id="flowchart-validateMovingToOccupiedPosition-16" class="node default"><rect height="54" width="319.625" y="-27" x="-159.8125" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-129.8125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="259.625"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>validateMovingToOccupiedPosition()</p></span></div></foreignObject></g></g><g transform="translate(832.90625, 451)" id="flowchart-attackingInsideBounds-18" class="node default"><rect height="54" width="232.21875" y="-27" x="-116.109375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-86.109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="172.21875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>attackingInsideBounds()</p></span></div></foreignObject></g></g><g transform="translate(832.90625, 555)" id="flowchart-attackingInsideAttackPattern-20" class="node default"><rect height="54" width="274.171875" y="-27" x="-137.0859375" data-et="node" data-id="abc" style="" class="basic label-container"></rect><g transform="translate(-107.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="214.171875"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>attackingInsideAttackPattern()</p></span></div></foreignObject></g></g></g></g></g></svg><p id="-wygtv0_31">For reference, here are the most relevant method heads:</p><div class="code-block" data-lang="java">
    public static ValidationResult validateCommands(
            List&lt;CharacterEntity&gt; characters,
            List&lt;MovementDataModel&gt; intendedMovements,
            List&lt;AttackDataModel&gt; intendedAttacks,
            GridService gridService,
            String hostID
    )
</div><div class="code-block" data-lang="java">
    public static List&lt;MovementDataModel&gt; validateMovements(
            List&lt;MovementDataModel&gt; intendedMovements,
            List&lt;CharacterEntity&gt; characters,
            GridService gridService,
            String hostID
    )
</div><div class="code-block" data-lang="java">
    public static List&lt;AttackDataModel&gt; validateAttacks(
            List&lt;AttackDataModel&gt; intendedAttacks,
            List&lt;CharacterEntity&gt; characters,
            GridService gridService,
            String hostID
    )
</div><div class="code-block" data-lang="java">
    public static List&lt;PairNoOrder&lt;
            MovementDataModel, MovementDataModel
        &gt;&gt; opposingPlayersMovingToSamePosition(
            List&lt;CharacterEntity&gt; characterEntities,
            List&lt;MovementDataModel&gt; intendedMovements
    )
</div><div class="code-block" data-lang="java">
    public static boolean movingInsideMovementPattern(
            MovementDataModel intendedMovement,
            CharacterEntity character,
            String hostID
    )
</div></section><section class="chapter"><h2 id="2-command-application" data-toc="2-command-application">2. Command Application</h2><p id="-wygtv0_64">After filtering all commands by validation, they can be safely applied to the characters. Besides applying attacks and movements, there is a check for characters with no remaining health and if there is a winner.</p><p id="-wygtv0_65">The <code class="code" id="-wygtv0_67">applyCommands</code> method is responsible for the aforementioned and returns a <code class="code" id="-wygtv0_68">TurnResult</code> object. This object stores the state of all characters after command application, movement conflicts, valid movements and attacks from the <code class="code" id="-wygtv0_69">ValidationResult</code> as well as the <code class="code" id="-wygtv0_70">PlayerID</code> of the winner or <code class="code" id="-wygtv0_71">null</code>, if there is none.</p><aside class="prompt" data-type="tip" data-title="" id="-wygtv0_66"><p id="-wygtv0_72">A draw can be ascertained if there are no characters left and the winner is still <code class="code" id="-wygtv0_73">null</code>.</p></aside></section><div class="last-modified">Last modified: 03 February 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="gridservice.html" class="navigation-links__prev">Grid Service</a><a href="client.html" class="navigation-links__next">Client</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>