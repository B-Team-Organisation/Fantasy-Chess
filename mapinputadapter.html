<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-02-05T22:33:20.669060519"><title>Map Input Adapter | Fantasy-Chess Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"process-click-in-game-init-mode","level":0,"title":"Process click in game init mode","anchor":"#process-click-in-game-init-mode"},{"id":"process-click-in-command-phase","level":0,"title":"Process click in command phase","anchor":"#process-click-in-command-phase"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Map Input Adapter | Fantasy-Chess Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Fantasy-Chess Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/mapinputadapter.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Map Input Adapter | Fantasy-Chess Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/mapinputadapter.html#webpage",
    "url": "writerside-documentation/mapinputadapter.html",
    "name": "Map Input Adapter | Fantasy-Chess Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Fantasy-Chess Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="MapInputAdapter" data-main-title="Map Input Adapter" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Technical Reference///Client///Input.md|Input"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Fantasy-Chess Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="MapInputAdapter" id="MapInputAdapter.md">Map Input Adapter</h1><p id="-tjbqzp_3"><code class="code" id="-tjbqzp_12">Author: Lukas Walker</code></p><p id="-tjbqzp_4">The map input adapter contains the entire logic for the player interaction with the grid. It puts input events in context with the current state of the game by tracking the current game phases and possible character/command-type selections (attack/move). These states can be gotten from/set here. It extends the LibGDX class <code class="code" id="-tjbqzp_13">InputAdapter</code>.</p><p id="-tjbqzp_5">The inputs are caught using the <code class="code" id="-tjbqzp_14">touchUp</code> event to evade all problems arising from holding down the mouse button.</p><p id="-tjbqzp_6">Another event caught using the <code class="code" id="-tjbqzp_15">keyUp</code> event opens the <a href="gamescreen.html#escape-menu" id="-tjbqzp_16" data-tooltip="A small menu that opens thanks to the that allows the player to abandon the match and return to the main menu.">Escape menu</a> of the <a href="gamescreen.html" id="-tjbqzp_17" data-tooltip="Author: Lukas Walker">Game Screen</a>.</p><p id="-tjbqzp_7">Left-clicking is used for selecting characters and setting commands. If a left click is registered outside the grid, the event will be dismissed. If the click hits a tile, this information is passed on depending on the current phase of the game (here: <code class="code" id="-tjbqzp_18">gameScreenMode</code>):</p><div class="code-block" data-lang="java">
if (gridPos == null){
    return false;
}

switch (gameScreenMode) {
    case TURN_OUTCOME:
        break;
    case GAME_INIT:
        processClickInGameInitMode(gridPos);
        break;
    case COMMAND_MODE:
        processClickInCommandMode(gridPos);
        break;
}
return true;
</div><p id="-tjbqzp_9">Right clicking resets all selections and can be used to cancel actions.</p><section class="chapter"><h2 id="process-click-in-game-init-mode" data-toc="process-click-in-game-init-mode">Process click in game init mode</h2><p id="-tjbqzp_19">This method is called if the click hits a tile in the <a href="gamescreen.html#game-initialisation" id="-tjbqzp_22" data-tooltip="Entering the Game Initialisation Phase brings the game to life. This process gets initiated by receiving the GAME_INIT packet, which calls the initializeGame method.">Game Initialisation</a>.</p><p id="-tjbqzp_20">If no character is selected (<code class="code" id="-tjbqzp_23">Command Mode</code> = NO_SELECTION), the Map Input Adapter tries to retrieve the one possible standing on the clicked tile from the <a href="gridservice.html" id="-tjbqzp_24" data-tooltip="Author: Lukas Walker">Grid Service</a>. If this succeeds, the <code class="code" id="-tjbqzp_25">Command Mode</code> it set to &quot;SWAP MODE&quot;. This only works if the clicked character belongs to the player clicking it. At the same time, the character will become the selected character and will be marked will a dark green tile (See <a href="gamescreen.html#selected-character-layer" id="-tjbqzp_26" data-tooltip="This layers contains a single green tile to show which character is currently selected when giving commands.">Selected-Character Layer</a>).</p><p id="-tjbqzp_21">In &quot;SWAP MODE&quot;, the click results in an attempts to move the characters to or swap the character with the character at the clicked position. This only works if the clicked tile is considered to be part of the starting rows (See <a href="gamescreen.html#start-rows-layer" id="-tjbqzp_27" data-tooltip="This layers contains the transparent green tiles seen in the . It shows the player the area in which the player can move or swap his characters during the phase.">Start-Rows Layer</a>).</p></section><section class="chapter"><h2 id="process-click-in-command-phase" data-toc="process-click-in-command-phase">Process click in command phase</h2><p id="-tjbqzp_28">Clicking on a tile while in command phase will too be handled differently depending on the current <code class="code" id="-tjbqzp_30">Command Mode</code>:</p><ol class="list _decimal" id="-tjbqzp_29" type="1"><li class="list__item" id="-tjbqzp_31"><p id="-tjbqzp_34"><code class="code" id="-tjbqzp_35">NO_SELECTION</code>: If a character is retrieved from the <a href="gridservice.html" id="-tjbqzp_36" data-tooltip="Author: Lukas Walker">Grid Service</a> at this location, a menu will open asking the player if he want to plan an attack or movement command. Choosing an option will result in the <code class="code" id="-tjbqzp_37">Command Mode</code> being set to the corresponding mode (<code class="code" id="-tjbqzp_38">MOVE_MODE</code> or <code class="code" id="-tjbqzp_39">ATTACK_MODE</code>). At the same time, the character will become the selected character and will be marked will a dark green tile (See <a href="gamescreen.html#selected-character-layer" id="-tjbqzp_40" data-tooltip="This layers contains a single green tile to show which character is currently selected when giving commands.">Selected-Character Layer</a>). Choosing a mode will also result in all valid target options being marked according to their type (See <a href="gamescreen.html#command-option-preview-layer" id="-tjbqzp_41" data-tooltip="The command option layer depicts all valid target tiles of an attack/movement command. In the images, it is responsible for the yellow circles (movement options) and red squares (attack options).">Command Option/Preview Layer</a>).</p></li><li class="list__item" id="-tjbqzp_32"><p id="-tjbqzp_42"><code class="code" id="-tjbqzp_43">MOVE_MODE</code>: If the clicked tile is still empty and a valid destination for a movement command of the selected character, a command is set and the selection is reset. The options will disappear.</p></li><li class="list__item" id="-tjbqzp_33"><p id="-tjbqzp_44"><code class="code" id="-tjbqzp_45">ATTACK_MODE</code>: If the clicked tile is a valid destination for a attack command of the selected character, a command is set and the selection is reset. The options will disappear and the damage of the attack is added to the damage numbers on the grid displaying the damage results of sending the current set of commands.</p></li></ol></section><div class="last-modified">Last modified: 05 February 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="input.html" class="navigation-links__prev">Input</a><a href="graphics.html" class="navigation-links__next">Graphics</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>